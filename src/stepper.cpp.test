
#include <AccelStepper.h>
#include <Arduino.h>
#include "PAMIBOARD.h"

const int stepperNb = 2; // Number of stepper motors
AccelStepper stepper[2] = {
        AccelStepper(1, Steppers::STEP1, Steppers::DIR1),
        AccelStepper(1, Steppers::STEP2, Steppers::DIR2)
        
    };

const int defaultSpeed = 10000; // Default speed in steps per second
const int defaultAccel = 2500; // Default acceleration in steps per second squared


void setup(){
    pinMode(Steppers::EN, OUTPUT);
    digitalWrite(Steppers::EN, LOW); // Enable the stepper drivers

    Serial.begin(115200);
    Serial.println("Stepper test started...");

    // Initialize the stepper motors
    for (int i = 0; i < stepperNb; i++) {
        stepper[i].setSpeed(defaultSpeed);
        stepper[i].setMaxSpeed(defaultSpeed);
        stepper[i].setAcceleration(defaultAccel);
    }

    // Move stepper 1 forward by 1000 steps
    stepper[0].move(10000); // Move stepper 1 forward by 1000 steps

    // Move stepper 2 backward by 1000 steps
    stepper[1].move(-10000); // Move stepper 2 backward by 1000 steps

    // Run the steppers until they reach their target positions
    do {
        stepper[0].run();
        stepper[1].run();
    } while (stepper[0].isRunning() || stepper[1].isRunning());


}



void loop(){

}